<!doctype html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>在线字数统计</title>
	<link rel="stylesheet" href="styles.css" />
	<style>
		/* 将国旗按钮与控制按钮在同一行并添加选中样式 */
		.controls { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
		.flag-row { display:flex; gap:6px; align-items:center; }
		.flag {
			display:inline-flex;align-items:center;justify-content:center;padding:4px;border-radius:6px;border:1px solid transparent;
			background:transparent;cursor:pointer;
		}
		.flag img{display:block;height:28px;width:auto;}
		/* 选中样式（class active 或 aria-pressed="true"） */
		.flag.active, .flag[aria-pressed="true"] {
			border-color: #2b6cb0;
			background: rgba(43,108,176,0.08);
			box-shadow: 0 0 0 3px rgba(43,108,176,0.08);
		}

		@media (orientation: portrait) {
			/* 保证四个控制按钮在一排，若过窄可横向滚动 */
			.button-row{
				display:flex;
				gap:8px;
				flex: 0 0 auto;
				overflow-x:auto;
				-webkit-overflow-scrolling: touch;
                width: 100%;
			}
			.button-row > button{
				flex: 0 0 auto;
                width: 23%;
				white-space: nowrap;
			}
			/* 国旗区移到下一行，占满宽度 */
			#flagRow{
				order: 2;
				/* width: 100%; */
				margin-top: 8px;
				justify-content: flex-start;
			}
			/* 保持 controls 可换行 */
			.controls{ flex-wrap: wrap; }
		}

		/* 深色模式覆盖（class .dark 加在 <html> 或 <body> 上） */
		:root{ --bg:#f7f8fb; --panel:#fff; --text:#222; --muted:#666; --border:#dcdfe6; --accent:#2b6cb0 }
		.dark{ --bg:#0b0f14; --panel:#0f1720; --text:#e6eef8; --muted:#9aa6b2; --border:#1f2933; --accent:#4ea0ff }

		body{ background:var(--bg); color:var(--text); }
		textarea{ background:var(--panel); color:var(--text); border:1px solid var(--border); }
		.stats, .controls, .stat{ background:var(--panel); color:var(--text); border-color:var(--border); }
		button{ background:transparent;color:var(--text);border-color:var(--border) }
		button:hover{ box-shadow: 0 0 0 3px rgba(0,0,0,0.04); }

		/* 右上角主题切换按钮：绝对定位（随页面滚动） */
		.theme-toggle{
			position:absolute; top:12px; right:12px; z-index:1200;
			width:42px;height:42px;border-radius:8px;border:1px solid var(--border);
			background:var(--panel);display:inline-flex;align-items:center;justify-content:center;cursor:pointer;
			box-shadow: 0 2px 6px rgba(0,0,0,0.06);
			transition: transform .12s ease, background .18s ease, box-shadow .18s ease, color .12s ease;
		}
		.theme-toggle:hover{ transform:translateY(-1px); }
		.theme-toggle .label{display:none}

		/* 深色模式下 hover：深蓝色发亮效果 */
		/* .dark .theme-toggle:hover{
			background: linear-gradient(180deg, var(--accent), #0f4f8a);
			color: #fff;
			box-shadow: 0 6px 24px rgba(30,90,160,0.35), 0 0 8px rgba(78,160,255,0.28);
			transform: translateY(-2px) scale(1.02);
		} */

		/* 确认态视觉：要求二次点击时使用（浅色确认提示） */
		.theme-toggle.confirm{
			border-color: var(--accent);
			box-shadow: 0 6px 20px rgba(78,160,255,0.20), 0 0 8px rgba(78,160,255,0.18);
			background: linear-gradient(180deg, rgba(78,160,255,0.06), rgba(78,160,255,0.02));
			transform: translateY(-1px) scale(1.02);
		}
	</style>
</head>
<body>
	<header>
		<h1>在线字数统计</h1>
		<p>实时统计字数、字符、行数。支持中英文混合。</p>
	</header>

	<main>
		<section class="editor">
			<textarea id="input" placeholder="在此粘贴，拖放txt或输入文本..."></textarea>
			<div class="controls">
				<div class="button-row">
					<button id="clear">清空</button>
					<button id="clearPaste">清空并粘贴</button>
					<button id="copy">复制</button>
					<button id="download">下载 .txt</button>
				</div>

				<!-- 将国旗选择区移动到 controls 内，保持 id=flagRow -->
				<div id="flagRow" class="flag-row" role="group" aria-label="语言选择">
					<!-- 默认选中自动检测 -->
					<button class="flag active" aria-pressed="true" data-lang="auto" title="自动检测"><img src="flag/auto.svg" alt="自动检测"></button>
					<button class="flag" data-lang="zh" title="中文（简体/中文）"><img src="flag/china.png" alt="中文"></button>
					<button class="flag" data-lang="en" title="英文"><img src="flag/us.svg" alt="英文"></button>
				</div>
			</div>
		</section>

		<section class="stats" aria-live="polite">
			<!-- 7 个数值槽（stat1..stat7），标签会由脚本动态替换 -->
			<div class="stat"><span class="label">项1</span><span id="stat1">0</span></div>
			<div class="stat"><span class="label">项2</span><span id="stat2">0</span></div>
			<div class="stat"><span class="label">项3</span><span id="stat3">0</span></div>
			<div class="stat"><span class="label">项4</span><span id="stat4">0</span></div>
			<div class="stat"><span class="label">项5</span><span id="stat5">0</span></div>
			<div class="stat"><span class="label">项6</span><span id="stat6">0</span></div>
			<div class="stat"><span class="label">项7</span><span id="stat7">0</span></div>

			<!-- 只保留检测显示在统计面板 -->
			<div class="stat mode">
				<span class="label">语言</span>
				<span id="detected" class="detected" aria-live="polite" title="自动检测到的语言">检测: 自动</span>
			</div>
		</section>
	</main>

	<!-- 主题切换开关（右上角） -->
	<button id="themeToggle" class="theme-toggle" aria-pressed="false" title="切换主题">🌙</button>

	<script src="script.js"></script>
</body>
</html>
